{
    "code": "import pandas as pd\nimport os\n\n# Define the upload directory path\nupload_dir = 'uploads/f49162df-c73e-4098-9f3a-01080653c3ac'\n\n# Create the directory if it doesn't exist\nos.makedirs(upload_dir, exist_ok=True)\n\n# Define the path to the input CSV file\ninput_csv_path = 'uploads/f49162df-c73e-4098-9f3a-01080653c3ac/sample-sales.csv'\n\n# Read the CSV file into a pandas DataFrame\ndf = pd.read_csv(input_csv_path)\n\n# Define the path for the output data CSV file\noutput_data_path = os.path.join(upload_dir, 'data.csv')\n\n# Save the DataFrame to data.csv\ndf.to_csv(output_data_path, index=False)\n\n# Define the path for the metadata file\nmetadata_path = os.path.join(upload_dir, 'metadata.txt')\n\n# Collect metadata\nwith open(metadata_path, 'w') as f:\n    f.write('--- DataFrame Info ---\\n')\n    df.info(buf=f)\n    f.write('\\n\\n--- DataFrame Columns ---\\n')\n    f.write(str(df.columns.tolist()))\n    f.write('\\n\\n--- DataFrame Head ---\\n')\n    f.write(df.head().to_string())\n    f.write('\\n\\n--- Stored File Paths ---\\n')\n    f.write(f'data.csv: {output_data_path} (Contains the scraped sales data)\\n')\n    f.write(f'metadata.txt: {metadata_path} (Contains metadata about the DataFrame and stored files)\\n')\n    f.write('\\n\\n--- JSON Answer Format ---\\n')\n    f.write('{\\n')\n    f.write('  \"total_sales\": number,\\n')\n    f.write('  \"top_region\": string,\\n')\n    f.write('  \"day_sales_correlation\": number,\\n')\n    f.write('  \"bar_chart\": \"base64 PNG string under 100kB\",\\n')\n    f.write('  \"median_sales\": number,\\n')\n    f.write('  \"total_sales_tax\": number,\\n')\n    f.write('  \"cumulative_sales_chart\": \"base64 PNG string under 100kB\"\\n')\n    f.write('}')",
    "libraries": [
        "pandas"
    ],
    "questions": [
        "What is the total sales across all regions?",
        "Which region has the highest total sales?",
        "What is the correlation between day of month and sales? (Use the date column.)",
        "Plot total sales by region as a bar chart with blue bars. Encode as base64 PNG.",
        "What is the median sales amount across all orders?",
        "What is the total sales tax if the tax rate is 10%?",
        "Plot cumulative sales over time as a line chart with a red line. Encode as base64 PNG."
    ],
    "comment": "Step-3: Getting scrap code and metadata from llm. Tries count = %d 0"
}